{
  "$schema": "https://raw.githubusercontent.com/node-pulse/playbooks/refs/heads/main/schemas/node-pulse-admiral-playbook-manifest-v1.schema.json",
  "id": "pb_7KpL9mNqXz",
  "name": "OpenBB Platform API (Nginx)",
  "version": "1.1.1",
  "description": "Opinionated deployment of OpenBB Platform API with Nginx reverse proxy and automatic SSL via Certbot",
  "author": {
    "name": "Yumin",
    "email": "yuminops@gmail.com",
    "url": "https://github.com/guiyumin",
    "status": "community"
  },
  "homepage": "https://github.com/node-pulse/playbooks/tree/main/catalog/o/openbb-platform-nginx",
  "repository": "https://github.com/node-pulse/playbooks",
  "category": "finance",
  "tags": [
    "finance",
    "financial-data",
    "api",
    "openbb",
    "data-platform",
    "analytics",
    "nginx"
  ],
  "structure": {
    "playbooks": {
      "install": {
        "file": "install.yml",
        "variables": [
          "openbb_domain",
          "openbb_port",
          "enable_ssl",
          "admin_email",
          "openbb_install_dir"
        ]
      },
      "uninstall": {
        "file": "uninstall.yml",
        "variables": ["openbb_install_dir"]
      }
    },
    "templates": [
      "templates/compose.yml.j2",
      "templates/nginx-http.conf.j2",
      "templates/nginx-https.conf.j2"
    ],
    "files": []
  },
  "ansible_version": ">=2.10",
  "os_support": [
    {
      "distro": "ubuntu",
      "version": "20.04",
      "arch": "both"
    },
    {
      "distro": "ubuntu",
      "version": "22.04",
      "arch": "both"
    },
    {
      "distro": "ubuntu",
      "version": "24.04",
      "arch": "both"
    },
    {
      "distro": "debian",
      "version": "11",
      "arch": "both"
    },
    {
      "distro": "debian",
      "version": "12",
      "arch": "both"
    },
    {
      "distro": "rhel",
      "version": "8",
      "arch": "both"
    },
    {
      "distro": "rhel",
      "version": "9",
      "arch": "both"
    },
    {
      "distro": "rocky",
      "version": "8",
      "arch": "both"
    },
    {
      "distro": "rocky",
      "version": "9",
      "arch": "both"
    },
    {
      "distro": "alma",
      "version": "8",
      "arch": "both"
    },
    {
      "distro": "alma",
      "version": "9",
      "arch": "both"
    },
    {
      "distro": "oracle",
      "version": "8",
      "arch": "both"
    },
    {
      "distro": "oracle",
      "version": "9",
      "arch": "both"
    },
    {
      "distro": "amazon",
      "version": "2",
      "arch": "both"
    },
    {
      "distro": "amazon",
      "version": "2023",
      "arch": "both"
    }
  ],
  "variables": [
    {
      "name": "openbb_domain",
      "label": "Domain Name",
      "type": "string",
      "description": "Fully qualified domain name for OpenBB Platform API (e.g., openbb.example.com)",
      "required": true,
      "pattern": "^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$"
    },
    {
      "name": "openbb_port",
      "label": "Application Port",
      "type": "integer",
      "default": 6900,
      "description": "Internal port for OpenBB Platform API (proxied by Nginx)",
      "required": false,
      "min": 1024,
      "max": 65535
    },
    {
      "name": "enable_ssl",
      "label": "Enable HTTPS/SSL",
      "type": "boolean",
      "default": true,
      "description": "Automatically obtain and configure SSL certificate via Certbot",
      "required": false
    },
    {
      "name": "admin_email",
      "label": "Admin Email (for SSL)",
      "type": "string",
      "description": "Email address for SSL certificate notifications (required if SSL enabled)",
      "required": false,
      "pattern": "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$"
    },
    {
      "name": "openbb_install_dir",
      "label": "Installation Directory",
      "type": "string",
      "default": "/opt/openbb",
      "description": "Directory where OpenBB Platform will be installed",
      "required": false,
      "pattern": "^/[a-zA-Z0-9/_-]+$"
    }
  ],
  "health_checks": [
    {
      "type": "tcp",
      "port": 6900,
      "timeout": 10
    },
    {
      "type": "http",
      "url": "http://localhost:6900/api/v1/health",
      "expect_status": 200,
      "timeout": 10
    },
    {
      "type": "command",
      "command": "docker ps | grep -q openbb",
      "timeout": 5
    },
    {
      "type": "command",
      "command": "systemctl is-active nginx",
      "timeout": 5
    }
  ],
  "dangerous_operations": [
    "Installs Docker and Docker Compose if not present",
    "Installs or configures Nginx as reverse proxy",
    "Installs Certbot and obtains SSL certificate from Let's Encrypt",
    "Opens ports 80 and 443 for web access",
    "Stores OpenBB configuration in /opt/openbb/data directory",
    "May modify Nginx configuration in /etc/nginx/sites-available/"
  ],
  "license": "MIT",
  "created_at": "2025-11-22T00:00:00Z",
  "updated_at": "2025-11-22T00:00:00Z"
}
